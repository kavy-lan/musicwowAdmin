(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7091d398"],{3123:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var a=i("b775");function l(){return Object(a["a"])({url:"/qiniu/upload/token",method:"get"})}},"6ed4":function(t,e,i){"use strict";var a=i("d0ea"),l=i.n(a);l.a},7017:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:"新建教材",visible:t.dialogVisible,width:"100%","custom-class":"customWidth",center:"",top:"0","close-on-click-modal":!1,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("div",{staticClass:"left"},[i("div",[i("label",[t._v("教材名称:")]),t._v(" "),i("el-input",{staticClass:"input",attrs:{placeholder:"请输入教材名称，字数最多20字内",maxlength:"19"},model:{value:t.detailMsg.title,callback:function(e){t.$set(t.detailMsg,"title",e)},expression:"detailMsg.title"}})],1),t._v(" "),i("div",[i("single-image",{attrs:{msg:"图片小于2M，格式为jpg、png",label:"教材封面:",size:"2097152",type:".jpg,.png",limit:1,filelist:t.materialCoverI},on:{files:t.materialCover}})],1),t._v(" "),i("div",[i("single-image",{attrs:{msg:"图片小于2M，格式为jpg、png",label:"教材课时封面:",type:".jpg,.png",size:"2097152",limit:1,filelist:t.materialClassCoverI},on:{files:t.materialClassCover}})],1),t._v(" "),i("div",[i("single-image",{attrs:{msg:"图片尺寸120x120并小于1M，格式为png",label:"乐器图标:",type:".png",limit:1,size:"1048576",filelist:t.iconI},on:{files:t.icon}})],1),t._v(" "),i("div",[i("label",{staticStyle:{"vertical-align":"top"}},[t._v("教材目标:")]),t._v(" "),i("el-input",{staticClass:"input Target",attrs:{placeholder:"请输入教材目标，字数最多300字内",type:"textarea",maxlength:"299"},model:{value:t.detailMsg.goal,callback:function(e){t.$set(t.detailMsg,"goal",e)},expression:"detailMsg.goal"}})],1),t._v(" "),i("div",[i("label",{staticStyle:{"vertical-align":"top"}},[t._v("备注说明:")]),t._v(" "),i("el-input",{staticClass:"input Target",attrs:{placeholder:"请输入教材目标，字数最多300字内",type:"textarea",maxlength:"299"},model:{value:t.detailMsg.remark,callback:function(e){t.$set(t.detailMsg,"remark",e)},expression:"detailMsg.remark"}})],1)]),t._v(" "),i("div",{staticClass:"right"},[i("div",[i("single-image",{attrs:{msg:"视频格式为mp4",label:"教材介绍视频:",type:".mp4",limit:1,filelist:t.materialVideoV},on:{files:t.materialVideo}})],1),t._v(" "),i("div",[i("label",{staticStyle:{"vertical-align":"top"}},[t._v("教材文字详情:")]),t._v(" "),i("el-input",{staticClass:"input textarea",attrs:{placeholder:"请输入教材文字详情，字数最多300字内",type:"textarea",maxlength:"299"},model:{value:t.detailMsg.details,callback:function(e){t.$set(t.detailMsg,"details",e)},expression:"detailMsg.details"}})],1),t._v(" "),i("div",[i("single-image",{attrs:{msg:"图片小于2M，格式为jpg、png",label:"教材详情图:",type:".jpg,.png",size:"2097152",filelist:t.materialDetailedI},on:{files:t.materialDetailed}})],1),t._v(" "),t.detailMsg.directory_list?i("div",[i("label",{staticStyle:{"vertical-align":"top"}},[t._v("教材目录：")]),t._v(" "),t.detailMsg.directory_list.length>0?i("div",{staticClass:"allCatalogue"},[i("span",[t._v("共")]),t._v(" "),i("div",{staticStyle:{margin:"0 5px 0 5px","text-align":"center"}},[t._v(t._s(t.detailMsg.directory_list.length))]),t._v(" "),i("span",[t._v("个目录")])]):t._e(),t._v(" "),t.detailMsg.directory_list.length>0?i("div",{staticClass:"materialCatalogue"},t._l(t.detailMsg.directory_list,(function(e,a){return i("div",{key:a,staticClass:"oneCatalogue"},[i("svg-icon",{staticClass:"laji",attrs:{"class-name":"search-icon","icon-class":"laji"},on:{click:function(e){return t.deleCatalogue(a)}}}),t._v(" "),i("div",{staticClass:"No",staticStyle:{"text-align":"center"}},[t._v(t._s(a+1))]),t._v(" "),i("el-input",{staticClass:"input",attrs:{placeholder:"请输入目录名称，字数最多20字内",maxlength:"20"},model:{value:e.title,callback:function(i){t.$set(e,"title",i)},expression:"item.title"}})],1)})),0):t._e(),t._v(" "),i("el-button",{attrs:{type:"info"},on:{click:t.newCatalogue}},[t._v("新增")])],1):t._e(),t._v(" "),i("div",{staticStyle:{width:"630px"}},[i("label",{staticStyle:{"vertical-align":"top"}},[t._v("单价课价格：")]),t._v(" "),i("el-radio-group",{attrs:{"text-color":"#585B63"},on:{change:t.radioChange},model:{value:t.detailMsg.is_class_price,callback:function(e){t.$set(t.detailMsg,"is_class_price",e)},expression:"detailMsg.is_class_price"}},[i("el-radio",{staticStyle:{display:"block"},attrs:{label:0}},[t._v("关闭")]),t._v(" "),i("el-radio",{attrs:{label:1}},[t._v("开启")])],1),t._v(" "),1==t.detailMsg.is_class_price?i("div",{staticStyle:{display:"inline-block","vertical-align":"bottom"}},[i("el-input",{staticClass:"input",staticStyle:{width:"106px"},attrs:{placeholder:"请输入价格",maxlength:"20"},model:{value:t.detailMsg.class_price,callback:function(e){t.$set(t.detailMsg,"class_price",e)},expression:"detailMsg.class_price"}}),t._v(" "),i("span",[t._v("元/30分钟")])],1):t._e()],1)]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.close}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"info"},on:{click:t.addA}},[t._v("确 定")])],1)])},l=[],s=i("b3d8"),n=i("70a2"),o=i("5c96"),c={components:{SingleImage:n["a"]},props:["dialogVisible","id"],data:function(){return{dialogVisibleii:this.dialogVisible,radio:1,materialName:"",materialTarget:"",materialDetail:"",price:0,remark:"",Catalogue:[],CatalogueNum:0,materialCoverI:[],materialClassCoverI:[],iconI:[],materialVideoV:[],materialDetailedI:[],detailMsg:{}}},watch:{id:function(t,e){}},mounted:function(){this.getDetail(this.id)},methods:{close:function(){this.$emit("close",!1)},file:function(t){console.log(t)},handleClose:function(){this.$emit("close",!1)},materialCover:function(t){t.length>0&&(this.detailMsg.cover=t[0].url)},materialClassCover:function(t){t.length>0&&(this.detailMsg.class_cover=t[0].url)},icon:function(t){t.length>0&&(this.detailMsg.icon=t[0].url)},materialVideo:function(t){t.length>0&&(this.detailMsg.video=t[0].url)},materialDetailed:function(t){t.length>0&&(this.detailMsg.details_image=t[0].url)},deleCatalogue:function(t){this.detailMsg.directory_list.splice(t,1)},radioChange:function(t){1==t?this.detailMsg.is_class_price=1:(this.detailMsg.is_class_price=0,this.detailMsg.class_price=0),console.log(t)},addA:function(){var t=this;return new Promise((function(e,i){Object(s["c"])(t.id,t.detailMsg).then((function(e){0==e.error_code&&(Object(o["Message"])({message:"编辑成功",type:"success",duration:5e3}),t.$emit("close",!0))})).catch((function(t){i(t)}))}))},getDetail:function(t){var e=this;return new Promise((function(i,a){Object(s["d"])(t).then((function(t){console.log(t),0==t.error_code&&(e.detailMsg=t.data,e.materialCoverI=[{url:e.detailMsg.cover}],e.materialClassCoverI=[{url:e.detailMsg.class_cover}],e.iconI=[{url:e.detailMsg.icon}],e.materialVideoV=[{url:e.detailMsg.video}],e.materialDetailedI=[{url:e.detailMsg.details_image}],e.CatalogueNum=e.detailMsg.directory_list[e.detailMsg.directory_list.length-1].directory_no)})).catch((function(t){a(t)}))}))},newCatalogue:function(){this.CatalogueNum=this.CatalogueNum+1,this.CatalogueNum<=9?this.detailMsg.directory_list.push({directory_no:parseInt("0".concat(this.CatalogueNum)),title:""}):this.detailMsg.directory_list.push({directory_no:parseInt("".concat(this.CatalogueNum)),title:""}),console.log(this.Catalogue)}}},r=c,d=(i("6ed4"),i("2877")),u=Object(d["a"])(r,a,l,!1,null,"e485a03a",null);e["default"]=u.exports},"91b6":function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var a=i("b775");function l(){return Object(a["a"])({url:"public/upload_config",method:"get"})}},b3d8:function(t,e,i){"use strict";i.d(e,"e",(function(){return l})),i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return n})),i.d(e,"d",(function(){return o})),i.d(e,"c",(function(){return c}));var a=i("b775");function l(t,e,i){return Object(a["a"])({url:"cs/book",method:"get",params:{page:t,limit:"10",filters:e,ops:i}})}function s(t){return Object(a["a"])({url:"cs/book",method:"delete",params:{ids:t}})}function n(t){return Object(a["a"])({url:"cs/book",method:"post",data:t})}function o(t){return Object(a["a"])({url:"cs/book/".concat(t),method:"get"})}function c(t,e){return Object(a["a"])({url:"cs/book/".concat(t),method:"PUT",data:e})}},d0ea:function(t,e,i){}}]);