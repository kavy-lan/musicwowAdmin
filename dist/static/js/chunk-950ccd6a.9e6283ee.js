(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-950ccd6a"],{"8d89":function(e,t,o){},dbf6:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:"添加课时",visible:e.dialogVisible,width:"100%","custom-class":"customWidth",center:"",top:"0","close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("div",{staticClass:"left"},[o("div",[o("label",[e._v("教材目录：")]),e._v(" "),o("div",{staticClass:"c_right"},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.CatalogueId,callback:function(t){e.CatalogueId=t},expression:"CatalogueId"}},e._l(e.options,(function(e){return o("el-option",{key:e.id,attrs:{value:e.id,label:e.title}})})),1)],1)]),e._v(" "),o("div",[o("label",[e._v("课时名称：")]),e._v(" "),o("div",{staticClass:"c_right className"},[o("el-input",{staticClass:"input",attrs:{placeholder:"课时编号",maxlength:"20"},model:{value:e.classNum,callback:function(t){e.classNum=t},expression:"classNum"}}),e._v(" "),o("el-input",{staticClass:"input",attrs:{placeholder:"请输入课时名称，字数最多20字内",maxlength:"20"},model:{value:e.className,callback:function(t){e.className=t},expression:"className"}})],1)]),e._v(" "),o("div",{staticClass:"class"},[o("label",[e._v("课堂知识点:")]),e._v(" "),e.Knowledge.length>0?o("div",{staticClass:"c_right classKnow"},[o("div",{},[o("div",{staticClass:"total"},[e._v(e._s(e.Knowledge.length))]),e._v(" "),o("span",[e._v("个知识点")])]),e._v(" "),e._l(e.Knowledge,(function(t,i){return o("div",{key:i,staticClass:"upload"},[o("div",[o("svg-icon",{staticClass:"laji",attrs:{"class-name":"search-icon","icon-class":"laji"},on:{click:function(t){return e.deleteKnowledge(i)}}}),e._v(" "),o("div",{staticClass:"total"},[e._v(e._s(i+1))]),e._v(" "),o("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.TemplateSelete(t,i)}},model:{value:t.Templatevalue,callback:function(o){e.$set(t,"Templatevalue",o)},expression:"items.Templatevalue"}},e._l(t.Template,(function(e){return o("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1),e._v(" "),o("div",[2==t.template_type?o("el-checkbox-group",{on:{change:function(t){return e.KnowledgeChange(t,i)}},model:{value:t.Knowledgebox2,callback:function(o){e.$set(t,"Knowledgebox2",o)},expression:"items.Knowledgebox2"}},[o("el-checkbox",{attrs:{disabled:"",label:"底图素材"}}),e._v(" "),o("el-checkbox",{attrs:{disabled:"",label:"其他素材"}}),e._v(" "),o("el-checkbox",{attrs:{label:"音频素材"}}),e._v(" "),o("el-checkbox",{attrs:{label:"视频素材"}})],1):o("el-checkbox-group",{on:{change:function(t){return e.KnowledgeChange(t,i)}},model:{value:t.Knowledgebox1,callback:function(o){e.$set(t,"Knowledgebox1",o)},expression:"items.Knowledgebox1"}},[o("el-checkbox",{attrs:{disabled:"",label:"图片素材"}}),e._v(" "),o("el-checkbox",{attrs:{label:"音频素材"}}),e._v(" "),o("el-checkbox",{attrs:{label:"视频素材"}})],1)],1),e._v(" "),2==t.template_type?o("div",[t.show.baseImage?o("single-image",{attrs:{msg:"素材图片小于3M，格式为 jpg、png、gif，图片最多1个",type:".jpg,.png,.gif",size:"3145728",label:"底图素材",limit:1,clear:t.clear},on:{files:function(t){return e.templateBase2(t,i)}}}):e._e(),e._v(" "),t.show.otherImage?o("single-image",{attrs:{msg:"素材图片小于1M，格式为 jpg、png、gif，图片最多7个",type:".jpg,.png,.gif",size:"1048576",label:"其他素材",limit:7,clear:t.clear},on:{files:function(t){return e.templateOther2(t,i)}}}):e._e(),e._v(" "),t.show.knowledgeVideo?o("single-image",{attrs:{msg:"素材视频格式为 mp4，视频最多4个",type:".mp4",limit:4,label:"视频素材",clear:t.clear},on:{files:function(t){return e.templateVideo2(t,i)}}}):e._e(),e._v(" "),t.show.knowledgeAudio?o("single-image",{attrs:{msg:"素材音频格式为 mp3，音频最多4个",type:".mp3",limit:4,label:"音频素材",clear:t.clear},on:{files:function(t){return e.templateAudio2(t,i)}}}):e._e()],1):o("div",[t.show.knowledgeImage?o("single-image",{attrs:{msg:"素材图片小于3M，格式为 jpg、png、gif，图片最多4个",type:".jpg,.png,.gif",size:"3145728",limit:4,label:"图片素材",clear:t.clear},on:{files:function(t){return e.templateImage1(t,i)}}}):e._e(),e._v(" "),t.show.knowledgeVideo?o("single-image",{attrs:{msg:"素材视频格式为 mp4，视频最多4个",type:".mp4",limit:4,label:"视频素材",clear:t.clear},on:{files:function(t){return e.templateVideo1(t,i)}}}):e._e(),e._v(" "),o("div",[t.show.knowledgeAudio?o("single-image",{attrs:{msg:"素材音频格式为 mp3，音频最多4个",type:".mp3",limit:4,label:"音频素材",clear:t.clear},on:{files:function(t){return e.templateAudio1(t,i)}}}):e._e()],1)],1)])}))],2):e._e(),e._v(" "),o("div",{staticStyle:{display:"inline-block"}},[o("el-button",{attrs:{type:"primary"},on:{click:e.newKnowledge}},[e._v("新增")])],1)])]),e._v(" "),o("div",{staticClass:"right"},[o("div",{staticClass:"Expand"},[o("label",[e._v("课后拓展：")]),e._v(" "),o("div",{staticClass:"c_right"},[o("div",[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.tuozhanSeleteValue,callback:function(t){e.tuozhanSeleteValue=t},expression:"tuozhanSeleteValue"}},e._l(e.tuozhanSelete,(function(e){return o("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1),e._v(" "),o("div",{staticClass:"text"},[e._v("课后扩展只有模板1暂不可修改，且永远出现在最后一个知识点素材")]),e._v(" "),o("div",[o("el-checkbox-group",{on:{change:e.tuozhanChange},model:{value:e.tuozhanList,callback:function(t){e.tuozhanList=t},expression:"tuozhanList"}},[o("el-checkbox",{attrs:{disabled:"",label:"图片素材"}}),e._v(" "),o("el-checkbox",{attrs:{label:"视频素材"}}),e._v(" "),o("el-checkbox",{attrs:{label:"音频素材"}})],1)],1),e._v(" "),o("div",[e.tuozhanImage?o("single-image",{attrs:{msg:"素材图片小于3M，格式为 jpg、png、gif，图片最多4个",label:"图片素材",type:".jpg,.png,.gif",size:"3145728",limit:4},on:{files:e.tuozhanImage1}}):e._e(),e._v(" "),e.tuozhanVideo?o("single-image",{attrs:{msg:"素材视频格式为 mp4，视频最多4个",label:"视频素材",type:".mp4",limit:4},on:{files:e.tuozhanVideo1}}):e._e(),e._v(" "),e.tuozhanAudio?o("single-image",{attrs:{msg:"素材音频格式为 mp3，音频最多4个",label:"音频素材",type:".mp3",limit:4},on:{files:e.tuozhanAudio1}}):e._e()],1)])]),e._v(" "),o("div",[o("label",{staticClass:"classwork"},[e._v("课时作业：")]),e._v(" "),o("div",{staticClass:"c_right work"},[o("div",{staticClass:"tips"},[e._v("课时作业共两个,1未学完作业,2全部学完作业")]),e._v(" "),o("div",[o("div",{staticClass:"total"},[e._v("1")]),e._v(" "),o("div",[o("el-checkbox-group",{on:{change:e.workSelete1},model:{value:e.workList1,callback:function(t){e.workList1=t},expression:"workList1"}},[o("el-checkbox",{attrs:{disabled:"",label:"作业文字"}}),e._v(" "),o("el-checkbox",{attrs:{label:"作业图片"}}),e._v(" "),o("el-checkbox",{attrs:{label:"作业视频"}})],1)],1),e._v(" "),o("div",[e.workT1?o("el-input",{staticClass:"input",staticStyle:{"margin-bottom":"13px"},attrs:{placeholder:"作业文字，字数为300以内",maxlength:"300",type:"textarea"},model:{value:e.workText1,callback:function(t){e.workText1=t},expression:"workText1"}}):e._e(),e._v(" "),e.workI1?o("single-image",{attrs:{msg:"素材图片小于2M，格式为 jpg、png，图片最多5个",label:"图片素材",size:"2097152",type:".jpg,.png",limit:5},on:{files:e.homeWorkI1}}):e._e(),e._v(" "),e.workV1?o("single-image",{attrs:{msg:"素材视频小于五分钟,格式为 mp4，视频最多1个",label:"视频素材",time:"300",type:".mp4",limit:1},on:{files:e.homeWorkV1}}):e._e()],1)]),e._v(" "),o("div",[o("div",{staticClass:"total"},[e._v("2")]),e._v(" "),o("div",[o("el-checkbox-group",{on:{change:e.workSelete2},model:{value:e.workList2,callback:function(t){e.workList2=t},expression:"workList2"}},[o("el-checkbox",{attrs:{disabled:"",label:"作业文字"}}),e._v(" "),o("el-checkbox",{attrs:{label:"作业图片"}}),e._v(" "),o("el-checkbox",{attrs:{label:"作业视频"}})],1)],1),e._v(" "),o("div",[e.workT2?o("el-input",{staticClass:"input",staticStyle:{"margin-bottom":"13px"},attrs:{placeholder:"作业文字，字数为300以内",maxlength:"300",type:"textarea"},model:{value:e.workText2,callback:function(t){e.workText2=t},expression:"workText2"}}):e._e(),e._v(" "),e.workI2?o("single-image",{attrs:{msg:"素材图片小于2M，格式为 jpg、png，图片最多5个",label:"图片素材",type:".jpg,.png",size:"2097152",limit:5},on:{files:e.homeWorkI2}}):e._e(),e._v(" "),e.workV2?o("single-image",{attrs:{msg:"素材视频小于五分钟,格式为 mp4，视频最多1个",label:"视频素材",type:".mp4",time:"300",limit:1},on:{files:e.homeWorkV2}}):e._e()],1)])])])]),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"info"},on:{click:e.close}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"success"},on:{click:e.addA}},[e._v("确 定")])],1)])},s=[],l=(o("7f7f"),o("af59")),a=o("70a2"),n=o("5c96"),r={components:{SingleImage:a["a"]},props:["dialogVisible","id"],data:function(){return{dialogVisibleii:this.dialogVisible,checkList:["复选框 A"],checked:!0,Knowledgebox:[],knowledgeVideo:!1,knowledgeAudio:!1,knowledgeImage:!0,options:[],value1:"",classNum:"",className:"",workText1:"",workText2:"",KnowledgeNum:0,Knowledge:[],clear1:!1,clear2:!1,CatalogueId:"",tuozhanSelete:[{value:1,label:"模版一[知识点]"}],tuozhanSeleteValue:"模版一[知识点]",tuozhanList:["图片素材"],tuozhanImage:!0,tuozhanVideo:!1,tuozhanAudio:!1,afters:{template_type:1,images:"",videos:[],audios:[]},workList1:["作业文字"],workList2:["作业文字"],workT1:!0,workI1:!1,workV1:!1,workT2:!0,workI2:!1,workV2:!1,works1:{},works2:{},works1images:"",works2images:"",works1videos:"",works2videos:""}},watch:{},mounted:function(){this.getDirectoryList(this.id)},methods:{close:function(){this.$emit("close",!1)},templateImage1:function(e,t){this.Knowledge[t].images="";for(var o=0;o<e.length;o++)this.Knowledge[t].images+="".concat(e[o].url,",");this.Knowledge[t].images=this.Knowledge[t].images.substring(0,this.Knowledge[t].images.length-1)},templateVideo1:function(e,t){this.Knowledge[t].videos=[];for(var o=0;o<e.length;o++)this.Knowledge[t].videos.push({url:e[o].url,title:e[o].name,cover:e[o].cover})},templateAudio1:function(e,t){this.Knowledge[t].audios=[];for(var o=0;o<e.length;o++)this.Knowledge[t].audios.push({url:e[o].url,title:e[o].name})},templateVideo2:function(e,t){this.Knowledge[t].videos=[];for(var o=0;o<e.length;o++)this.Knowledge[t].videos.push({url:e[o].url,title:e[o].name,cover:e[o].cover})},templateAudio2:function(e,t){this.Knowledge[t].audios=[];for(var o=0;o<e.length;o++)this.Knowledge[t].audios.push({url:e[o].url,title:e[o].name})},templateBase2:function(e,t){this.Knowledge[t].negative_image="";for(var o=0;o<e.length;o++)this.Knowledge[t].negative_image+="".concat(e[o].url,",");this.Knowledge[t].negative_image=this.Knowledge[t].negative_image.substring(0,this.Knowledge[t].negative_image.length-1)},templateOther2:function(e,t){this.Knowledge[t].images="";for(var o=0;o<e.length;o++)this.Knowledge[t].images+="".concat(e[o].url,",");this.Knowledge[t].images=this.Knowledge[t].images.substring(0,this.Knowledge[t].images.length-1)},tuozhanImage1:function(e){this.afters.images="";for(var t=0;t<e.length;t++)this.afters.images+="".concat(e[t].url,",");this.afters.images=this.afters.images.substring(0,this.afters.images.length-1)},tuozhanVideo1:function(e){this.afters.videos=[];for(var t=0;t<e.length;t++)this.afters.videos.push({url:e[t].url,title:e[t].name,cover:e[t].cover})},tuozhanAudio1:function(e){this.afters.audios=[];for(var t=0;t<e.length;t++)this.afters.audios.push({url:e[t].url,title:e[t].name})},homeWorkI1:function(e){this.works1images="";for(var t=0;t<e.length;t++)this.works1images+="".concat(e[t].url,",");this.works1images=this.works1images.substring(0,this.works1images.length-1)},homeWorkI2:function(e){this.works2images="";for(var t=0;t<e.length;t++)this.works2images+="".concat(e[t].url,",");this.works2images=this.works2images.substring(0,this.works2images.length-1)},handleClose:function(){this.$emit("close",!1)},homeWorkV1:function(e){e.length>1&&(this.works1videos=e[0].url)},homeWorkV2:function(e){e.length>1&&(this.works2videos=e[0].url)},newCatalogue:function(){this.CatalogueNum=this.CatalogueNum+1,this.CatalogueNum<=9?this.Catalogue.push({directory_no:parseInt("0".concat(this.CatalogueNum)),title:""}):this.Catalogue.push({directory_no:parseInt("".concat(this.CatalogueNum)),title:""}),console.log(this.Catalogue)},deleCatalogue:function(e){this.Catalogue.splice(e,1),console.log(this.Catalogue)},addA:function(){var e=this;console.log(this.afters);var t=[];this.Knowledge.map((function(e){t.push({knowledge_no:e.knowledge_no,template_type:e.template_type,images:e.images,negative_image:e.negative_image,videos:e.videos,audios:e.audios})})),this.works1.classwork_no=1,this.works2.classwork_no=2,this.works1.images=this.works1images,this.works2.images=this.works2images,this.works1.video=this.works1videos,this.works2.video=this.works2videos,this.works1.describe=this.workText1,this.works2.describe=this.workText2;var o=[this.works1,this.works2];this.arrayTirm(t),this.objectTirm(this.afters);for(var i=0;i<t.length;i++){if(1==t[i].template_type&&!t[i].images)return Object(n["Message"])({message:"知识点图片素材不能为空",type:"error",duration:5e3}),!1;if(2==t[i].template_type&&(!t[i].images||!t[i].negative_image))return Object(n["Message"])({message:"知识点图片素材和底图素材不能为空",type:"error",duration:5e3}),!1}if(!this.afters.images)return Object(n["Message"])({message:"课后拓展图片素材不能为空",type:"error",duration:5e3}),!1;var s={book_id:this.id,book_directory_id:this.CatalogueId,class_no:this.classNum,title:this.className,knowledges:t,afters:this.afters,works:o};return new Promise((function(t,o){Object(l["a"])(s).then((function(t){0==t.error_code&&(Object(n["Message"])({message:"添加成功",type:"success",duration:5e3}),e.$emit("close",!0))})).catch((function(e){o(e)}))}))},getDirectoryList:function(e){var t=this;return new Promise((function(o,i){Object(l["e"])(e).then((function(e){0==e.error_code&&(t.options=e.data)})).catch((function(e){i(e)}))}))},newKnowledge:function(){this.KnowledgeNum=this.KnowledgeNum+1,this.Knowledge.push({knowledge_no:this.KnowledgeNum,template_type:1,images:"",videos:[],audios:[],negative_image:"",Knowledgebox1:["图片素材"],Knowledgebox2:["底图素材","其他素材"],show:{knowledgeImage:!0,knowledgeVideo:!1,knowledgeAudio:!1,baseImage:!1,otherImage:!1},Template:[{value:"1",label:"模板1[知识点]"},{value:"2",label:"模板2[交互]"}],Templatevalue:"模板1[知识点]",clear:!1})},deleteKnowledge:function(e){this.Knowledge.splice(e,1)},KnowledgeChange:function(e,t){e.indexOf("音频素材")>-1?this.Knowledge[t].show.knowledgeAudio=!0:this.Knowledge[t].show.knowledgeAudio=!1,e.indexOf("视频素材")>-1?this.Knowledge[t].show.knowledgeVideo=!0:this.Knowledge[t].show.knowledgeVideo=!1,e.indexOf("图片素材")>-1?this.Knowledge[t].show.knowledgeImage=!0:this.Knowledge[t].show.knowledgeImage=!1,e.indexOf("底图素材")>-1?this.Knowledge[t].show.baseImage=!0:this.Knowledge[t].show.baseImage=!1,e.indexOf("其他素材")>-1?this.Knowledge[t].show.otherImage=!0:this.Knowledge[t].show.otherImage=!1},TemplateSelete:function(e,t){this.Knowledge[t].clear=!this.Knowledge[t].clear,2==e?(this.Knowledge[t].show.baseImage=!0,this.Knowledge[t].show.otherImage=!0,this.Knowledge[t].Knowledgebox2=["底图素材","其他素材"],this.Knowledge[t].template_type=2):(this.Knowledge[t].show.baseImage=!1,this.Knowledge[t].show.otherImage=!1,this.Knowledge[t].show.knowledgeImage=!0,this.Knowledge[t].Knowledgebox1=["图片素材"],this.Knowledge[t].template_type=1),this.Knowledge[t].show.knowledgeAudio=!1,this.Knowledge[t].show.knowledgeVideo=!1,this.Knowledge[t].images="",this.Knowledge[t].negative_image="",this.Knowledge[t].audios=[],this.Knowledge[t].videos=[]},tuozhanChange:function(e){console.log(e),e.indexOf("图片素材")>-1?this.tuozhanImage=!0:this.tuozhanImage=!1,e.indexOf("视频素材")>-1?this.tuozhanVideo=!0:this.tuozhanVideo=!1,e.indexOf("音频素材")>-1?this.tuozhanAudio=!0:this.tuozhanAudio=!1},workSelete1:function(e){e.indexOf("作业文字")>-1?this.workT1=!0:this.workT1=!1,e.indexOf("作业图片")>-1?this.workI1=!0:this.workI1=!1,e.indexOf("作业视频")>-1?this.workV1=!0:this.workV1=!1},workSelete2:function(e){e.indexOf("作业文字")>-1?this.workT2=!0:this.workT2=!1,e.indexOf("作业图片")>-1?this.workI2=!0:this.workI2=!1,e.indexOf("作业视频")>-1?this.workV2=!0:this.workV2=!1},arrayTirm:function(e){for(var t=0;t<e.length;t++)for(var o in e[t])e[t][o].length<1&&delete e[t][o]},objectTirm:function(e){for(var t in e)e[t].length<1&&delete e[t]}}},g=r,c=(o("e11b"),o("2877")),h=Object(c["a"])(g,i,s,!1,null,"3024827e",null);t["default"]=h.exports},e11b:function(e,t,o){"use strict";var i=o("8d89"),s=o.n(i);s.a}}]);